<hr>
<p>title: iOSåŸç†-renderLoop<br>date: 2021-11-01 13:19:53<br>tags: [iOSåŸç†,iOSé¢è¯•é¢˜,iOSå¡é¡¿]</p>
<hr>
<p>å­—èŠ‚çš„é¢è¯•ä¸­ï¼Œé—®äº†ä¸€é“renderLoopçš„é—®é¢˜ã€‚æˆ‘å½“æ—¶ä¸€è„¸æ‡µé€¼ğŸ˜³ï¼Œç„¶ååˆé—®äº†UIViewçš„æ¸²æŸ“è¿‡ç¨‹ã€‚å½“æ—¶æ²¡æœ‰å›ç­”å¥½ï¼Œå‡†å¤‡å¥½å¥½æ€»ç»“ä¸€ä¸‹ã€‚</p>
<h2 id="Explore-UI-animation-hitches-and-the-render-loop"><a href="#Explore-UI-animation-hitches-and-the-render-loop" class="headerlink" title="Explore UI animation hitches and the render loop"></a>Explore UI animation hitches and the render loop</h2><h3 id="å¡é¡¿ï¼ˆhitchï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#å¡é¡¿ï¼ˆhitchï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å¡é¡¿ï¼ˆhitchï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ"></a>å¡é¡¿ï¼ˆhitchï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>A hitch is any time a frame appears on screen later than expected.<br>ä»»ä½•æ—¶å€™å±å¹•ä¸Šå‡ºç°æ™šäºé¢„è®¡çš„å¸§éƒ½å±äºå¡é¡¿ã€‚</p>
<h3 id="the-Render-loop"><a href="#the-Render-loop" class="headerlink" title="the Render loop"></a>the Render loop</h3><p>The Render Loop is a continuous process by which touch events are handed to an app, and then changes to the UI are sent to the operating system where the frame is finalized.Itâ€™s a loop, and it happens at the deviceâ€™s refresh rate.</p>
<p>æ¸²æŸ“å¾ªç¯æ˜¯ä¸€ä¸ªè¿ç»­æ€§çš„è¿‡ç¨‹ã€‚é€šè¿‡è§¦ç¢°äº‹ä»¶ä¼ é€ç»™appï¼Œç„¶åè½¬åŒ–åˆ°ç”¨æˆ·ç•Œé¢ï¼Œå‘æ“ä½œç³»ç»Ÿä¼ é€ã€‚æœ€ç»ˆå‘ˆç°ç»™ç”¨æˆ·ï¼Œè¿™å°±æ˜¯å¾ªç¯ï¼Œéšç€è®¾å¤‡çš„åˆ·æ–°ç‡å‘ç”Ÿã€‚</p>
<p><img src="/theRenderLoop1.png" alt="the Render loop "></p>
<p>æ•´ä¸ªæ¸²æŸ“å¾ªç¯ç”±äº”ä¸ªé˜¶æ®µç»„æˆ:</p>
<ul>
<li>1.äº‹ä»¶é˜¶æ®µ(Event)</li>
<li>2.æäº¤é˜¶æ®µï¼ˆCommitï¼‰</li>
<li>3.æ¸²æŸ“å‡†å¤‡(Render prepare)</li>
<li>4.æ¸²æŸ“æ‰§è¡Œ(Render execute)</li>
<li>5.å±•ç¤ºé˜¶æ®µ(Display)</li>
</ul>
<p><img src="/theRenderLoop.png" alt="the Render loop é˜¶æ®µ"></p>
<h4 id="äº‹ä»¶é˜¶æ®µï¼ˆEvent"><a href="#äº‹ä»¶é˜¶æ®µï¼ˆEvent" class="headerlink" title="äº‹ä»¶é˜¶æ®µï¼ˆEvent)"></a>äº‹ä»¶é˜¶æ®µï¼ˆEvent)</h4><p>åœ¨è¿™ä¸ªé˜¶æ®µï¼ŒAppå¤„ç†è§¦ç¢°äº‹ä»¶æˆ–è€…Timerç­‰å…¶ä»–äº‹ä»¶ï¼Œå†³å®šç”¨æˆ·ç•Œé¢æ˜¯å¦éœ€è¦å˜åŒ–ã€‚</p>
<h3 id="å¡é¡¿çš„ç±»å‹-the-type-hitchsï¼‰"><a href="#å¡é¡¿çš„ç±»å‹-the-type-hitchsï¼‰" class="headerlink" title="å¡é¡¿çš„ç±»å‹(the type hitchsï¼‰"></a>å¡é¡¿çš„ç±»å‹(the type hitchsï¼‰</h3><p>1.æäº¤å¡é¡¿(commit hitch)<br>2.æ¸²æŸ“å¡é¡¿(render hitch)</p>
<p><img src="/theTypeHitchs.png" alt="the type hitchs"></p>
<h3 id="æµ‹é‡å¡é¡¿æ—¶é—´-measuring-hitch-time"><a href="#æµ‹é‡å¡é¡¿æ—¶é—´-measuring-hitch-time" class="headerlink" title="æµ‹é‡å¡é¡¿æ—¶é—´ (measuring hitch time)"></a>æµ‹é‡å¡é¡¿æ—¶é—´ (measuring hitch time)</h3><h2 id="æäº¤é˜¶æ®µçš„å¡é¡¿"><a href="#æäº¤é˜¶æ®µçš„å¡é¡¿" class="headerlink" title="æäº¤é˜¶æ®µçš„å¡é¡¿"></a>æäº¤é˜¶æ®µçš„å¡é¡¿</h2><h3 id="iOSç¦»å±æ¸²æŸ“"><a href="#iOSç¦»å±æ¸²æŸ“" class="headerlink" title="iOSç¦»å±æ¸²æŸ“"></a>iOSç¦»å±æ¸²æŸ“</h3><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://developer.apple.com/videos/play/tech-talks/10855">Explore UI animation hitches and the render loop</a></p>
<p><a href="https://developer.apple.com/videos/play/tech-talks/10856">Find and fix hitches in the commit phase</a></p>
<p><a href="https://developer.apple.com/videos/play/tech-talks/10857">Demystify and eliminate hitches in the render phase</a></p>
